(this.webpackJsonpecapp=this.webpackJsonpecapp||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Ie}));var a=n(0),r=n.n(a),i=n(8),c=n.n(i),u=n(30),o=n(17),l=n(31),s=function(e){return e.users},m=Object(l.a)([s],(function(e){return e.uid})),d=Object(l.a)([s],(function(e){return e.username})),f=Object(l.a)([s],(function(e){return e.twitterName})),p=Object(l.a)([s],(function(e){return e.isSignedIn})),h=Object(l.a)([s],(function(e){return e.image})),b=n(20),g=n.n(b),v=n(36),w=n(15),j=n(38),O=n.n(j);n(102),n(103),n(105),n(106);O.a.initializeApp({apiKey:"AIzaSyDcr-kKHhnkLRpTJLytgj3zz1Q5FapF480",authDomain:"auth-test-86bbf.firebaseapp.com",databaseURL:"https://auth-test-86bbf.firebaseio.com",projectId:"auth-test-86bbf",storageBucket:"auth-test-86bbf.appspot.com",messagingSenderId:"840706133120",appId:"1:840706133120:web:fbca5c8051dc73bc88aa65",measurementId:"G-LP7GCRPZPC"});var E=O.a.auth(),y=O.a.firestore(),x=(O.a.storage(),O.a.functions(),O.a.firestore.Timestamp),k=n(58),N=n.n(k),I=function(e){var t=e.children,n=Object(o.d)(),i=Object(o.e)((function(e){return e})),c=p(i);return Object(a.useEffect)((function(){c||n(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.onAuthStateChanged((function(e){if(e){var n=e.uid;y.collection("users").doc(n).get().then((function(e){var a,r=e.data();t({type:"SIGN_IN",payload:{isSignedIn:!0,role:(a={isSignedIn:!0,uid:n,twitterName:r.twitterName,username:r.username,image:r.image}).role,uid:a.uid,username:a.username,twitterName:a.twitterName,image:a.image}})}))}else t(Object(w.d)("/login"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c?t:r.a.createElement(r.a.Fragment,null)},C=n(25),S=n(149),T=n(146),_=Object(T.a)({button:{backgroundColor:"#4dd0e1",color:"000",fontSize:16,height:48,marginButtom:16,width:256}}),U=function(e){var t=_();return r.a.createElement(S.a,{className:t.button,variant:"contained",onClick:function(){return e.onClick()}},e.label)},z=Object(T.a)((function(e){return{button:{backgroundColor:"grey",color:"000",fontSize:16,height:30,marginButtom:16,width:150}}})),F=function(e){var t=z();return r.a.createElement(S.a,{className:t.button,variant:"contained",onClick:function(){return e.onClick()}},e.label)},P=n(156),B=function(e){return r.a.createElement(P.a,{fullWidth:e.fullWidth,label:e.label,margin:"dense",multiline:e.multiline,required:e.required,rows:e.rows,value:e.value,type:e.type,onChange:e.onChange})},G=n(26);function W(){var e=Object(C.a)(["\n  width: 600px;\n  margin: 0 auto;\n  text-align: center;\n  margin-top: 50px;\n"]);return W=function(){return e},e}var D=function(){var e=Object(o.d)();return r.a.createElement(L,null,r.a.createElement(U,{label:"\u30c4\u30a4\u30c3\u30bf\u30fc\u3067\u30ed\u30b0\u30a4\u30f3",onClick:function(){return e(function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new N.a.auth.TwitterAuthProvider,N.a.auth().languageCode="pt",n.setCustomParameters({lang:"es"}),N.a.auth().signInWithPopup(n).then((function(e){var n=e.user,a=e.additionalUserInfo.username;console.log(e.additionalUserInfo.username);var r=e.user.providerData[0].uid,i=e.user.providerData[0].displayName,c=e.user.providerData[0].photoURL,u=x.now(),o=n.uid,l={createed_at:u,updated_at:u,role:"customer",twitterId:r,uid:o,twitterName:a,username:i,image:c};y.collection("users").doc(o).set(l).then((function(){t(Object(w.d)("/"))}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}))},L=G.a.section(W()),A=n(81),R=y.collection("tweets"),q=Object(l.a)([function(e){return e.tweets}],(function(e){return e.list})),H=n(151),J=n(152),K=n(155),X=n(154),Q=n(153),Z=n(157),$=n(59),M=Object(T.a)({root:{width:"100%",backgroundColor:"white"},inline:{display:"inline"}}),V=function(e){var t=e.textUid,n=e.text,a=e.userImage,i=e.twitterName,c=M(),u=Object(o.e)((function(e){return e})),l=m(u),s=t===l?"p-chat__reverse":"p-chat-row",d=t===l?"p-text-revers":"";return r.a.createElement(H.a,{className:c.root},r.a.createElement(J.a,{className:s},r.a.createElement(Q.a,null,r.a.createElement(Z.a,{alt:"user image",src:a})),r.a.createElement(X.a,{className:d,primary:"@"+i,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{component:"span",variant:"body2",className:c.inline,color:"textPrimary"},n))})),r.a.createElement(K.a,null))};function Y(){var e=Object(C.a)(["\n  width: 600px;\n  margin: 0 auto;\n"]);return Y=function(){return e},e}function ee(){var e=Object(C.a)(["\n  width: 600px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n"]);return ee=function(){return e},e}function te(){var e=Object(C.a)(["\n  width: 600px;\n  height: 50px;\n  margin: 0 auto;\n  text-align: center;\n  font-size: 20px;\n"]);return te=function(){return e},e}function ne(){var e=Object(C.a)(["\n  width: 600px;\n  margin: 0 auto;\n  display: flex;\n"]);return ne=function(){return e},e}function ae(){var e=Object(C.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  margin-right: 20px;\n  margin-left: 10px;\n"]);return ae=function(){return e},e}function re(){var e=Object(C.a)(["\n  margin-right: 100px;\n  color: white;\n"]);return re=function(){return e},e}function ie(){var e=Object(C.a)(["\n  width: 100%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  background-color: teal;\n  justify-content: center;\n"]);return ie=function(){return e},e}var ce=function(){var e=Object(o.d)(),t=Object(o.e)((function(e){return e})),n=d(t),i=h(t),c=f(t),u=q(t),l=Object(a.useState)(""),s=Object(A.a)(l,2),m=s[0],p=s[1],b=Object(a.useCallback)((function(e){p(e.target.value)}),[p]);return Object(a.useEffect)((function(){var t=y.collection("tweets").orderBy("updated_at","asc").onSnapshot((function(t){t.docChanges().forEach((function(e){var t=e.doc.data();switch(e.type){case"added":u.splice(0,0,t)}})),e(function(e){return function(){var t=Object(v.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"FETCH_TEXT",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(u))}));return function(){return t()}}),[]),r.a.createElement("section",null,r.a.createElement(ue,null,r.a.createElement(le,{src:i,alt:"\u30e6\u30fc\u30b6\u30fc\u753b\u50cf"}),r.a.createElement(oe,null,"TwtterName : "+c),r.a.createElement(F,{label:"\u30ed\u30b0\u30a2\u30a6\u30c8",onClick:function(){return e(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.signOut().then((function(){t({type:"SIGN_OUT",payload:{isSignedIn:!1,uid:"",username:"",image:"",role:""}}),t(Object(w.d)("/login"))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})),r.a.createElement(se,null,r.a.createElement("p",null,n+" \u69d8\u3088\u3046\u3053\u305d")),r.a.createElement(me,null,"\u306a\u3093\u3067\u3082\u304b\u3044\u3066\u3048\u3048\u3067"),r.a.createElement(de,null,r.a.createElement(B,{fullWidth:!0,label:"tweet",margin:"dense",multiline:!1,required:!0,rows:1,value:m,type:"text",onChange:b}),r.a.createElement(F,{label:"tweet",onClick:function(){e(function(e){return function(){var t=Object(v.a)(g.a.mark((function t(n,a){var r,i,c,u,o,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=5;break}return alert("\u306a\u306b\u3082\u66f8\u3044\u3066\u306a\u3044\u3058\u3083\u3093"),t.abrupt("return",!1);case 5:r=a().users,i=r.twitterName,c=r.image,u=r.uid,o=x.now(),l={text:e,user:i,uid:u,image:c,updated_at:o},R.doc().set(l);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(m)),p("")}})),r.a.createElement(fe,null,u.length>0&&u.map((function(e,t){return r.a.createElement(V,{key:t,text:e.text,twitterName:e.user,userImage:e.image,textUid:e.uid})}))))},ue=G.a.div(ie()),oe=G.a.p(re()),le=G.a.img(ae()),se=G.a.div(ne()),me=G.a.h2(te()),de=G.a.div(ee()),fe=G.a.div(Y()),pe=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/login",component:D}),r.a.createElement(I,null,r.a.createElement(u.a,{exact:!0,path:"(/)?",component:ce})))},he=(n(113),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,r.a.createElement(pe,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=n(41),ge=n(78),ve=n(46),we=n(73),je=n(37),Oe={users:{isSignedIn:!1,uid:"",role:"",username:"",image:"",twitterName:""},tweets:{list:[]},newTweets:{list:[]}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe.users,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(je.a)(Object(je.a)({},e),t.payload);case"SIGN_OUT":return Object(je.a)({},t.payload);default:return e}},ye=n(80),xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe.tweets,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TEXT":return Object(je.a)(Object(je.a)({},e),{},{list:Object(ye.a)(t.payload)});default:return e}};var ke,Ne=n(79).a(),Ie=(ke=Ne,Object(be.d)(Object(be.c)({router:Object(ve.b)(ke),tweets:xe,users:Ee}),Object(be.a)(Object(we.a)(ke),ge.a)));c.a.render(r.a.createElement(o.a,{store:Ie},r.a.createElement(ve.a,{history:Ne},r.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,n){e.exports=n(114)}},[[92,1,2]]]);
//# sourceMappingURL=main.53fcf127.chunk.js.map